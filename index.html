<!DOCTYPE html>

<!--Assignment - includes Calculator 0.1, 0.5 and 1 -->
<html>

<head>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script="javascript" type="text/javascript"></script>


</head>

<body>
    <script>
        var errmsg = "Error";
        var numString = "";
        var number_array = ['', ''];
        var number_index = 0; //var jordan
        var temp_num = '';
        var operator = '';
        var cnextoper = '';
        var first_time = true;
        var answer = 0;
        //$(document).ready(function () {
        function input_digit(typed_number) {
            console.log("input_digit - typed" ,typed_number)
          //  numString += typed_number;
            //console.log("in the input: ", numString);
            number_array[number_index] = number_array[number_index] + typed_number; 
            console.log("in the input array: ",  number_array  );
             $("#inputdisplay").val(number_array[number_index]);
          //  $("#inputdisplay").val(numString);
             
        }

        function addition() {
            
            console.log("in addition");
             console.log("addition:" , number_array);
            operator = '+';
          //  numString += " + ";
          $("#inputdisplay").val(number_array[number_index]);
            morenumbers();
        }
            
                      
        function morenumbers() { 
          console.log("after more numbers")  
           console.log("more:" , number_array); 
           console.log("first_time")
          //  $("#inputdisplay").val(numString);
          $("#inputdisplay").val(number_array[number_index] );
             if(first_time) {    
                number_index = 1;
                console.log("more first time:" , number_array);
                console.log("more  first time sw:" , first_time);
                first_time = false;
                console.log("more  first time sw:" , first_time);
            }else if( number_array[1] == "") {
                  console.log("more - elseif" , number_array);
                   number_array[0] = number_array[0] * 2;
                   number_array[1] =   '';
                   console.log("more - elseif" , number_array);
                    $("#inputdisplay").val(number_array[0] );
        } else {
             
             calculate();
              console.log("more else" , number_array, first_time);
             number_array[0] = answer;
            number_array[1] = 0;
             console.log("more else" , number_array);
             console.log("more else first time sw:" , first_time);
            first_time = true;
              
        }
     }
        
        
        
        function subtraction() {
            number_index = 1;
            operator = '-';

        }

        function multiply() {
            number_index = 1;
            operator = '*';

        }

        function divide() {
            number_index = 1;
            operator = '/';

        }

        function refresh() {
            $("#inputdisplay").val("");
            number_array[0] = "";
            number_array[1] = "";
            number_index = 0;
        }

        function clearnumber() {
            var current_index = this.number_index;
            number_array[current_index] = 0;
            $("#inputdisplay").val("");
        }

        function calcpercent() {
            var percentindex = this.number_index;
            number_array[number_index] = number_array[percentindex] / 100;
            $("#inputdisplay").val(number_array[number_index]);

        }


        function exponent() {
            number_index = 1;
            operator = '^';
        }


        function signs() {
            console.log("insigns: " )
            var numwithsign = -number_array[number_index];
            number_array[number_index] = numwithsign;
            console.log("insigns: " ,number_array ) ;
            console.log("insigns index: " , number_index );
            $("#inputdisplay").val(number_array[number_index]);
            numwithsign = 0;
        }
        
        function equalButton(){
              console.log("equalbutton before the", number_array);
             if(number_array[1] == ""){
               console.log("equalbutton right after if ", number_array)
               $("#inputdisplay").val(number_array[0]); }
             
            console.log("equalbutton")
            calculate();
            //numString += " = " + answer;
            console.log("in equal button before display")
            $("#inputdisplay").val(answer);
              number_array[1] = "";
              number_array[0] = answer;
              console.log("in equal button after inititlize display" ,  number_array)
        }

        function calculate() {
            var result;
            if(number_array[1] == "") {
                result = parseFloat(number_array[0]);
            } else {

                switch (operator) {
                case "+":
                    console.log("in calculate- add",  number_array);
                    result = parseFloat(number_array[0]) + parseFloat(number_array[1]);
                     console.log("in calculate - add after",  number_array);
                     console.log("in calculate - add after",  result);
                    //$("#inputdisplay").val(result);
                    
                    break;
                case "-":
                    result = parseFloat(number_array[0]) - parseFloat(number_array[1]);
                    $("#inputdisplay").val(result);
                    break;
                case "*":
                    result = parseFloat(number_array[0]) * parseFloat(number_array[1]);
                    $("#inputdisplay").val(result);
                    break;
                case "/":
                    var bothnum = parseFloat(number_array[0]) + parseFloat(number_array[1]);
                    if (parseFloat(number_array[1]) == 0) {
                        $("#inputdisplay").val(errmsg);
                    } else if (bothnum == 0) {
                        $("#inputdisplay").val(errmsg);
                    } else {
                        result = parseFloat(number_array[0]) / parseFloat(number_array[1]);
                        $("#inputdisplay").val(result);
                        bothnum = 0;

                    }
                    break;

                case "^":
                    var result = 1;
                    var numindex = number_array[1];

                    for (i = 0; i < numindex; i++) {
                        result = parseFloat(number_array[0]) * parseFloat(result);
                    }
                    $("#inputdisplay").val(result);
                    parseFloat(number_array[0]) = 0;
                    parseFloat(number_array[1]) = 0;
                } 
            }
          answer = result;   
          console.log("end of case" ,answer);
          $("#inputdisplay").val(answer);
        }
    </script>


    <input id="inputdisplay" placeholder="Ready">
    <br>
    <button type="button" onclick="refresh()">AC</button>
    <button type="button" onclick="signs()">+/-</button>
    <button type="button" onclick="calcpercent()">%</button>
    <button type="button" onclick="exponent()">^</button>
    <button type="button" onclick="divide()">/</button>


    <br>
    <button type="button" onclick="input_digit(7)">7</button>
    <button type="button" onclick="input_digit(8)">8</button>
    <button type="button" onclick="input_digit(9)">9</button>

    <button type="button" onclick="multiply()">*</button>


    <br>
    <button type="button" onclick="input_digit(4)">4</button>
    <button type="button" onclick="input_digit(5)">5</button>
    <button type="button" onclick="input_digit(6)">6</button>
    <button type="button" onclick="subtraction()">-</button>
    <br>
    <button type="button" onclick="input_digit(1)">1</button>
    <button type="button" onclick="input_digit(2)">2</button>
    <button type="button" onclick="input_digit(3)">3</button>
    <button type="button" onclick="addition()">+</button>
    <br>
    <button type="button" onclick="clearnumber()">C</button>
    <button type="button" onclick="input_digit(0)">0</button>
    <button type="button" onclick="input_digit('.')">.</button>
    <!--<button type="button" onclick="calculate()">=</button>-->
    <button type="button" onclick="equalButton()">=</button>
    <button type="button" onclick="plusequal()">"+="</button>


</body>

</html>